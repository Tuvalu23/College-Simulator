document.addEventListener("DOMContentLoaded",function(){function togglePanels(toggle){let currentPanel=toggle.closest(".nav-panel");target=toggle.getAttribute("data-panel-target");targetPanel=document.getElementById(target);toggle.classList.contains("menu-breadcrumb")?(currentPanel.classList.remove("is-active"),targetPanel.classList.remove("hidden"),targetPanel.classList.remove("slide-out"),setTimeout(function(){currentPanel.classList.add("hidden")},500)):(toggle.parentNode.classList.contains("unit-level")&&currentPanel.classList.add("hidden"),document.querySelector(".right-col.is-active")&&(document.querySelector(".right-col.is-active .panel-wrap").classList.remove("is-active"),document.querySelector(".right-col.is-active").classList.add("hidden"),document.querySelector(".right-col.is-active").classList.remove("is-active")),currentPanel.classList.contains("primary-panel")&&(currentPanel.classList.add("slide-out"),setTimeout(function(){targetPanel.classList.add("is-active")},5)),toggle.setAttribute("aria-expanded","true"),targetPanel.querySelector(".panel-wrap").classList.add("active"));targetPanel=document.querySelector("#"+target);targetPanel.classList.remove("hidden")}function closeMenu(){let activePanel=document.getElementById(mainNav).querySelector("div.is-active");if(document.body.classList.remove("no-scroll"),document.querySelector(".nav-wrap.active").classList.remove("active"),document.querySelector(".nav-panel.is-active:not(.primary-panel)")){var parentNav=document.querySelector(".nav-panel.is-active:not(.primary-panel");parentNav.classList.remove("is-active");parentNav.classList.add("hidden");parentNav.querySelector(".panel-wrap").classList.remove("active")}document.querySelector(".primary-panel").classList.remove("hidden","slide-out");document.getElementById("main-menu-btn").getAttribute("aria-expanded")=="false"?document.getElementById("main-menu-btn").setAttribute("aria-expanded","true"):document.getElementById("main-menu-btn").setAttribute("aria-expanded","false");document.getElementById("main-menu-btn").focus()}function openMenu(){let activePanel=document.getElementById(mainNav).querySelector("div.is-active");document.body.classList.add("no-scroll");document.querySelector(".nav-wrap").classList.add("active");document.querySelector(".nav-panel.is-active").classList.add("active");document.querySelector(".nav-panel.is-active .panel-wrap").classList.add("is-active");document.getElementById("main-menu-btn").getAttribute("aria-expanded")=="false"?document.getElementById("main-menu-btn").setAttribute("aria-expanded","true"):document.getElementById("main-menu-btn").setAttribute("aria-expanded","false");document.querySelector("#main-menu-close").focus()}const mainNav="main-navigation";document.querySelectorAll("#top-resources .toggle-menu").forEach(function(toggle){toggle.addEventListener("click",function(){toggle.getAttribute("aria-expanded")=="true"?(toggle.setAttribute("aria-expanded","false"),toggle.parentNode.classList.remove("active")):(toggle.setAttribute("aria-expanded","true"),toggle.parentNode.classList.add("active"))});toggle.onkeyup=function(event){switch(event.keyCode){case 27:toggle.parentNode.classList.remove("active");toggle.setAttribute("aria-expanded","false");break;case 40:toggle.getAttribute("aria-expanded")=="false"&&(toggle.setAttribute("aria-expanded","true"),toggle.parentNode.classList.add("active"));toggle.parentNode.querySelector(".sub-menu li a").focus()}}});var resourceMenuItems=document.getElementById("top-resources");resourceMenuItems&&(resourceMenuItems.onkeydown=function(event){activeItem=document.activeElement;switch(event.keyCode){case 37:if(event.preventDefault(),activeItem.parentNode.classList.contains("top-level")&&activeItem.parentNode.previousSibling!=null){activeItem.parentNode.previousElementSibling.querySelector(".toggle-menu").focus();break}if(activeItem.parentNode.parentNode.classList.contains("sub-menu")){if(activeItem.parentNode.parentNode.parentNode.classList.remove("active"),activeItem.parentNode.parentNode.parentNode.setAttribute("aria-expanded","false"),activeItem.parentNode.parentNode.parentNode.previousElementSibling!=null){activeItem.parentNode.parentNode.parentNode.previousElementSibling.querySelector(".toggle-menu").focus();break}activeItem.parentNode.parentNode.previousSibling==null&&activeItem.parentNode.parentNode.querySelector(".toggle-menu").focus();break}else break;case 38:if(event.preventDefault(),activeItem.parentNode.classList.contains("top-level"))break;if(activeItem.parentNode.previousElementSibling==null){var toggle=activeItem.parentNode.parentNode.parentNode.querySelector(".toggle-menu");activeItem.parentNode.parentNode.parentNode.classList.remove("active");activeItem.parentNode.parentNode.parentNode.setAttribute("aria-expanded","false");toggle.focus();break}if(activeItem.parentNode.parentNode.classList.contains("sub-menu")){activeItem.parentNode.previousElementSibling!=null&&activeItem.parentNode.previousElementSibling.querySelector("a").focus();break}break;case 39:if(event.preventDefault(),activeItem.classList.contains("toggle-menu")&&activeItem.parentNode.nextElementSibling!==null&&(activeItem.parentNode.nextElementSibling.querySelector(".toggle-menu").focus(),activeItem.parentNode.parentNode.classList.remove("active"),activeItem.parentNode.parentNode.setAttribute("aria-expanded","false")),activeItem.parentNode.parentNode.classList.contains("sub-menu")){if(activeItem.parentNode.parentNode.parentNode.nextElementSibling!=null){activeItem.parentNode.parentNode.parentNode.nextElementSibling.querySelector(".toggle-menu").focus();activeItem.parentNode.parentNode.parentNode.classList.remove("active");activeItem.parentNode.parentNode.parentNode.setAttribute("aria-expanded","false");break}if(activeItem.parentNode.parentNode.nextSibling===null){activeItem.parentNode.parentNode.classList.remove("active");activeItem.parentNode.parentNode.setAttribute("aria-expanded","false");activeItem.parentNode.parentNode.querySelector(".toggle-menu").focus();break}}break;case 40:if(event.preventDefault(),activeItem.classList.contains("toggle-menu")){activeItem.parentNode.setAttribute("aria-expanded","true");activeItem.parentNode.classList.add("active");activeItem.parentNode.querySelector("a").focus();break}if(activeItem.parentNode.parentNode.classList.contains("sub-menu")&&activeItem.parentNode.nextElementSibling!=null){activeItem.parentNode.nextElementSibling.querySelector("a").focus();break}}});document.querySelectorAll("#top-resources .parent").forEach(function(item){var timer;item.onmouseover=function(){clearTimeout(timer);item.classList.add("active");item.querySelector("button").setAttribute("aria-expanded","true")};item.onmouseleave=function(){timer=setTimeout(function(){item.classList.remove("active");item.querySelector("button").setAttribute("aria-expanded","false")},1)};item.onkeyup=function(event){switch(event.keyCode){case 27:item.classList.remove("active");item.querySelector("button").setAttribute("aria-expanded","false");item.querySelector("button").focus()}}});window.addEventListener("click",function(e){this.document.querySelector(".nav-wrap").classList.contains("active")&&!document.getElementById("main-navigation").contains(e.target)&&closeMenu()});document.querySelectorAll("#main-navigation .nav-wrap button.toggle-menu").forEach(function(toggle){toggle.addEventListener("click",function(e){e.target.classList.add("active-toggle");togglePanels(e.target)})});document.querySelector("#main-navigation .nav-wrap").addEventListener("click",function(e){e.target.classList.contains("nav-wrap")&&(document.querySelector(".nav-wrap").classList.remove("active"),document.querySelector("body").classList.remove("no-scroll"),document.querySelector("#main-menu-btn").setAttribute("aria-expanded","false"))});parentLink="";document.querySelector("#main-navigation .nav-wrap").onkeydown=function(e){var nextItem,parentPanelID,parentNav;let currentActive=document.activeElement,currentPanel=document.querySelector(".nav-wrap"),menuBtn=document.getElementById("main-menu-close"),focusableContent=currentPanel.querySelectorAll("button, [href]"),firstFocus=focusableContent[0],lastFocus=focusableContent[focusableContent.length-1],targetPanelID=currentActive.parentNode.getAttribute("data-panel-parent");switch(e.keyCode){case 27:closeMenu();break;case 9:if(e.shiftKey){if(currentActive===firstFocus){let lastChild=document.querySelector(".site-level").querySelector("li:last-child");if(window.getComputedStyle(lastChild).display==="none"){lastChild.previousElementSibling.querySelector("button").focus();e.preventDefault();break}document.querySelector(".site-level").querySelector("li:last-child").focus();break}if(currentActive.closest("ul")&&currentActive.closest("ul").classList.contains("site-level")||currentActive.classList.contains("menu-close")||currentActive.classList.contains("nav-panel-header"))break;if(currentActive.closest("ul")&&currentActive.parentNode.tagName!="H2"&&!currentActive.closest("ul").classList.contains("expanded-menu")&&currentActive.parentNode.previousElementSibling==null){parentToggle=document.querySelector(".active-toggle");parentToggle.classList.remove("active-toggle");parentToggle.focus();currentActive.closest(".nav-panel").classList.remove("is-active");targetPanel.classList.remove("hidden","slide-out");currentActive.closest(".nav-panel").classList.add("hidden");e.preventDefault();break}break}else{nextItem=currentActive.parentNode.nextElementSibling;let targetPanelID=currentActive.parentNode.getAttribute("data-panel-target");parentPanelID=currentActive.parentNode.getAttribute("data-panel-parent");let target=document.getElementById(targetPanelID);if(parentPanelID!=null){let parentPanelSibling=document.querySelector(`[data-panel-id="${parentPanelID}"]`).nextElementSibling;if(currentActive.classList.contains("top-level-toggle")&&window.getComputedStyle(nextItem).display==="none"){e.preventDefault();firstFocus.focus();break}if(nextItem==null&&currentActive.closest(".expanded-menu")==null&&window.getComputedStyle(parentPanelSibling).display!=="none"){currentActive.closest(".panel-wrap.active").classList.remove("active");currentActive.closest(".nav-panel.is-active").classList.add("hidden");currentActive.closest(".nav-panel.is-active").classList.remove("is-active");parentPanelSibling.querySelector(".toggle-menu").focus();e.preventDefault();break}if(nextItem==null&&window.getComputedStyle(parentPanelSibling).display==="none"){e.preventDefault();currentActive.closest(".panel-wrap.active").classList.remove("active");currentActive.closest(".nav-panel.is-active").classList.add("hidden");currentActive.closest(".nav-panel.is-active").classList.remove("is-active");firstFocus.focus();break}if(currentActive.parentNode.classList.contains("top-level")&&document.querySelector(".nav-panel.is-active:not(.primary-panel)")&&(document.querySelector(".nav-panel.is-active:not(.primary-panel) .panel-wrap").classList.remove("active"),document.querySelector(".nav-panel.is-active:not(.primary-panel)").classList.add("hidden"),document.querySelector(".nav-panel.is-active:not(.primary-panel").classList.remove("is-active")),currentActive.closest(".top-level-child")!=null)break;break}if(currentActive.classList.contains("top-level-toggle")){target.querySelector(".panel-wrap").classList.remove("active");currentActive.classList.remove("active");currentActive.setAttribute("aria-expanded",!1);break}if(nextItem==null&&currentActive.parentNode.nextElementSibling==null&&currentActive.closest(".menu-item--expanded")==null&&currentActive.closest(".panel-wrap.active")){currentActive.closest(".panel-wrap.active").classList.remove("active");currentActive.closest(".nav-panel.is-active").classList.add("hidden");currentActive.closest(".nav-panel.is-active").classList.remove("is-active");document.querySelector(`[data-panel-id="${targetPanelID}"]`).querySelector("button").focus();break}break}case 37:if(currentActive.parentNode.classList.contains("top-level"))break;if(currentActive.parentNode.parentNode.classList.contains("expanded-menu")){targetPanelID=currentActive.closest(".parent").getAttribute("data-panel-parent");currentActive.closest(".nav-panel").classList.remove("is-active");targetPanel.classList.remove("hidden","slide-out");currentActive.closest(".nav-panel").classList.add("hidden");document.querySelector(`[data-panel-id="${targetPanelID}"]`).querySelector("button").classList.remove("is-active");document.querySelector(`[data-panel-id="${targetPanelID}"]`).querySelector("button").focus();break}currentActive.parentNode.classList.contains("menu-item")&&targetPanel!=undefined&&(currentActive.closest(".nav-panel").classList.remove("is-active"),targetPanel.classList.remove("hidden","slide-out"),currentActive.closest(".nav-panel").classList.add("hidden"),document.querySelector(`[data-panel-id="${targetPanelID}"]`).querySelector("button").classList.remove("is-active"),document.querySelector(`[data-panel-id="${targetPanelID}"]`).querySelector("button").focus());break;case 38:if(currentActive.classList.contains("nav-panel-header")){firstFocus.focus();break}if(currentActive.tagName=="BUTTON")if(parentNav=document.querySelector(".nav-panel.is-active:not(.primary-panel"),console.log("UP UP UP"),currentActive.parentNode.previousElementSibling==null){parentNav&&(parentNav.classList.remove("is-active"),parentNav.classList.add("hidden"),parentNav.querySelector(".panel-wrap").classList.remove("active"));currentActive.parentNode.closest(".panel-wrap").querySelector(".nav-panel-header").focus();break}else{parentNav&&(parentNav.classList.remove("is-active"),parentNav.classList.add("hidden"),parentNav.querySelector(".panel-wrap").classList.remove("active"));currentActive.parentNode.previousElementSibling.firstElementChild.focus();break}if(currentActive.closest(".expanded-menu")!=null&&currentActive.parentNode.previousElementSibling==null){currentActive.closest(".menu-item--expanded").querySelector("ul > li > a").focus();break}if(currentActive.parentNode.previousElementSibling!=null&&currentActive.parentNode.previousElementSibling.classList.contains("menu-item--expanded")){currentActive.parentNode.previousElementSibling.querySelector("ul > li:last-child > a").focus();break}if(currentActive.parentNode.classList.contains("menu-item")&&currentActive.parentNode.previousElementSibling!=null){currentActive.parentNode.previousElementSibling.firstElementChild.focus();break}else break;case 39:if(currentActive.getAttribute("data-panel-target")==null)break;currentActive.getAttribute("data-panel-target")!=null&&(currentActive.classList.add("active-toggle"),togglePanels(currentActive),document.getElementById(currentActive.getAttribute("data-panel-target")).querySelector("ul li a").focus());break;case 40:if(currentActive.tagName=="BUTTON"&&(parentNav=document.querySelector(".nav-panel.is-active:not(.primary-panel"),currentActive.parentNode.nextElementSibling!=null)){currentActive.parentNode.nextElementSibling.firstElementChild.focus();parentNav&&(parentNav.classList.remove("is-active"),parentNav.classList.add("hidden"),parentNav.querySelector(".panel-wrap").classList.remove("active"));break}if(currentActive.parentNode.classList.contains("parent")){currentActive.parentNode.querySelector(":scope > ul > li > a").focus();break}if(currentActive.classList.contains("nav-panel-header")){currentActive.parentNode.nextSibling.querySelector("li").firstElementChild.focus();break}if(currentActive.classList.contains("menu-close")){document.querySelector(".nav-panel-header.active-site").focus();break}if(currentActive.closest("ul").classList.contains("expanded-menu")&&currentActive.parentNode.nextElementSibling==null){currentActive.closest(".parent").nextElementSibling.querySelector("a").focus();break}if(currentActive.parentNode.classList.contains("menu-item")&&currentActive.parentNode.nextElementSibling!=null){currentActive.parentNode.nextElementSibling.firstElementChild.focus();break}else break}};document.getElementById("main-menu-btn").addEventListener("click",function(){document.querySelector(".nav-wrap").classList.contains("active")?closeMenu():openMenu()});document.getElementById("main-menu-close").addEventListener("click",function(){closeMenu()});let allLinks=document.querySelectorAll("a");allLinks.forEach(link=>{link.addEventListener("click",function(){link.href.indexOf("#")!=-1&&closeMenu()})})},!1);