{% extends "base.html" %}

{% block title %}Your Statistics{% endblock %}

{% block background %}
<div class="background-overlay" style="background-image: url('{{ url_for('static', filename='images/statistics.jpg') }}');"></div>
{% endblock %}

{% block content %}
<div class="container mx-auto py-10 relative z-10">
    <h1 class="text-4xl font-extrabold text-center text-white drop-shadow-lg mb-10">Your Statistics</h1>

    <!-- Quick College Simulator Section -->
    <div>
        <h2 class="text-3xl font-bold text-center text-white drop-shadow-lg mb-6">Quick College Simulator</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
            {% for stat in sorted_stats %}
            {% set rank = loop.index %}

            <!-- Determine gradient based on rank -->
            {% if rank == 1 %}
                {% set gradient_classes = "from-yellow-400 via-yellow-500 to-yellow-600" %}
            {% elif rank == 2 %}
                {% set gradient_classes = "from-gray-400 via-gray-500 to-gray-600" %}
            {% elif rank == 3 %}
                {% set gradient_classes = "from-yellow-800 via-orange-700 to-yellow-600" %}
            {% else %}
                {% set gradient_classes = "from-indigo-700 via-purple-700 to-indigo-700" %}
            {% endif %}

            <div class="transform hover:scale-105 transition duration-300 hover:shadow-2xl">
                <div class="card-container">
                    <!-- Front of the card -->
                    <div class="front card-face rounded-lg shadow-lg bg-gradient-to-r {{ gradient_classes }} p-6 flex flex-col justify-center items-center">
                        <div class="flex flex-col items-center mb-4">
                            <img src="{{ url_for('static', filename=stat.logo.split('static/')[-1]) }}" alt="{{ stat.display_name }} Logo"
                                 class="w-48 h-48 object-contain mb-2">
                            <!-- Rank and name that flips card on click -->
                            <h3 class="text-2xl font-bold text-center text-white cursor-pointer college-title hover:text-yellow-300 transition-colors duration-300"
                                data-side="front">
                                #{{ rank }} {{ stat.display_name }}
                            </h3>
                        </div>
                        <div class="text-white text-center">
                            <p>Total Simulations: {{ stat.total_simulations }}</p>
                            <p>Acceptances: {{ stat.acceptances }}</p>
                            <p>Rejections: {{ stat.rejections }}</p>
                            <p>Success Rate: {{ stat.success_rate }}%</p>
                        </div>
                    </div>

                    <!-- Back of the card -->
                    <div class="back card-face rounded-lg shadow-lg bg-gradient-to-r {{ gradient_classes }} p-6 flex flex-col justify-center items-center">
                        <div class="flex flex-col items-center mb-4">
                            
                            <!-- Rank and name that flips card on click -->
                            <h3 class="text-2xl font-bold text-center text-white cursor-pointer college-title hover:text-yellow-300 transition-colors duration-300"
                                data-side="back">
                                #{{ rank }} {{ stat.display_name }}
                            </h3>
                        </div>
                        <p class="text-white text-center px-2">
                            {{ stat.description }}
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Advanced Features Section -->
    <div class="mt-12">
        <h2 class="text-3xl font-bold text-center text-white drop-shadow-lg mb-4">Advanced College Simulator</h2>
        <div class="text-white text-center py-8 rounded-lg shadow-lg transform hover:scale-105 transition duration-300 bg-gradient-to-r from-green-500 via-teal-500 to-blue-500">
            <p class="text-lg font-semibold animate-pulse">Coming Soon!</p>
        </div>
    </div>

    <!-- Back to Dashboard Button -->
    <div class="mt-10 text-center">
        <a href="{{ url_for('dashboard') }}"
           class="bg-gradient-to-r from-green-400 via-teal-500 to-blue-500 text-white font-bold py-3 px-6 rounded-full shadow-md hover:shadow-lg transition-transform transform hover:scale-105">
            Back to Dashboard
        </a>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const collegeTitles = document.querySelectorAll('.college-title');
        collegeTitles.forEach(titleElem => {
            titleElem.addEventListener('click', () => {
                const cardContainer = titleElem.closest('.card-container');
                cardContainer.classList.toggle('flipped');
            });
        });
    });
</script>

<style>
    .background-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        filter: blur(4px);
        z-index: -1;
        opacity: 0.6;
    }

    .perspective {
        perspective: 1000px;
    }

    .card-container {
        width: 100%;
        height: 400px;
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.6s ease, box-shadow 0.6s ease;
    }

    .card-container:hover {
        animation: glow 2s infinite;
    }

    .card-container.flipped {
        transform: rotateY(180deg);
    }

    .card-face {
        position: absolute;
        inset: 0;
        backface-visibility: hidden;
    }

    .front {
        transform: rotateY(0deg);
    }

    .back {
        transform: rotateY(180deg);
    }

    .hover-card:hover {
        transform: scale(1.1) rotate(2deg);
    }

    @keyframes glow {
        0% {
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }
        50% {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        100% {
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }
    }
</style>
{% endblock %}
